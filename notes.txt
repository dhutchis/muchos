Replacing hosts:
  ^sense-(\w+)\n([\d\.]+)\n([\d\.]+)\n
  \1 \3 \2

sed -e '122,127d' /home/centos/install/accumulo-1.8.0/conf/accumulo-site.xml
# java.opts !!! -Xmx6G



leader3 System swappiness setting is greater than ten (30) which can cause time-sensitive operations to be delayed.  Accumulo is time sensitive because it needs to maintain distributed lock agreement.
https://askubuntu.com/questions/103915/how-do-i-configure-swappiness
cat /proc/sys/vm/swappiness
sudo sysctl vm.swappiness=10

declare -a arrall=("worker1" "worker2" "worker3" "worker4" "worker5" "worker6" "worker7" "worker8" "leader1" "leader2" "leader3")
for i in "${arrall[@]}"
do
  #ssh -t $i sed -i.bak -e '122,127d' /home/centos/install/accumulo-1.8.0/conf/accumulo-site.xml
  ssh -t $i sudo sysctl vm.swappiness=10
done

get tab autocomplete for muchos

Tinfo = DB('DH_info','DH_infoT');
AinfoAll = Tinfo(:,:);
Assoc2CSV(AinfoAll,char(10),char(9),'DH_info_0703v1.tsv')
sftp centos@35.163.192.45:/home/centos/d4m/examples/3Scaling/2ParallelDatabase/alg/DH_info_0703v1.tsv
A = ReadCSV('DH_info.tsv')




muchos stop
muchos start # update host


alias accumuloroot="accumulo shell -u root -p secret"

$HADOOP_PREFIX/sbin/stop-yarn.sh


wget http://pastebin.com/raw/DV6eQmZ1 -O .screenrc
sudo yum install zip unzip emacs octave -y 
git config --global user.name "Dylan Hutchison"
git config --global user.email dhutchis@cs.washington.edu
git config --global core.editor emacs
git config --global merge.tool emerge
git config --list                 # list settings
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.st status
git config --global alias.diffs "diff --stat"

git clone https://github.com/Accla/graphulo.git
export GRAPHULO_HOME=$PWD/graphulo
echo "export GRAPHULO_HOME=$PWD/graphulo" >> $HOME/.bashrc
cd graphulo
cat <<'EOF' > "GraphuloTest.conf"
accumulo.it.cluster.standalone.admin.principal=root
accumulo.it.cluster.standalone.admin.password=secret
accumulo.it.cluster.standalone.zookeepers=leader2:2181,leader1:2181,leader3:2181
accumulo.it.cluster.standalone.instance.name=muchos
EOF

mvn package -DskipTests #-DNoDoAll

# Place Graphulo JAR
declare -a arrr=("worker1" "worker2" "worker3" "worker4" "worker5" "worker6" "worker7" "worker8") 
#"leader1" "leader2" "leader3" 
for i in "${arrr[@]}"
do
	#sftp "$i":"/home/centos/install/accumulo-1.8.0/lib/ext" <<< $'rm graphulo-1.0.0-SNAPSHOT.jar'
	sftp "$i":"$ACCUMULO_HOME/lib/ext" <<< $'put target/graphulo-1.0.0-SNAPSHOT-alldeps.jar'
done





cd ~
git clone https://github.com/Accla/d4m.git
echo "export D4M_HOME=$PWD/d4m" >> $HOME/.bashrc
export D4M_HOME=$PWD/d4m
cd d4m

cp $(echo "$GRAPHULO_HOME"/target/graphulo-*.jar | tr ' ' '\n' | grep -v alldeps) "$D4M_HOME/lib"
unzip -ouq "$GRAPHULO_HOME"/target/graphulo-*-libext.zip -d "$D4M_HOME"
# Replace DBinit.m in D4M matlab_src with new version.
mv "$D4M_HOME/DBinit.m" "$D4M_HOME/matlab_src"
echo "Installed Graphulo into D4M_HOME at $D4M_HOME"


cat <<'EOF' > "/home/centos/.octaverc"
D4M_HOME = '/home/centos/d4m';
addpath([D4M_HOME '/matlab_src']);
Assoc('','','');
DBinit;
EOF


cat <<'EOF' > "$D4M_HOME/examples/3Scaling/2ParallelDatabase/DBsetup.m"
if ~exist('myName','var')
    myName = 'DH_';      % SET LOCAL LABEL TO AVOID COLLISIONS.
end
INSTANCENAME = 'muchos';
ZKHOSTS = 'leader2:2181,leader1:2181,leader3:2181';
DB = DBserver(ZKHOSTS,'Accumulo',INSTANCENAME,'root','secret');
G = DBaddJavaOps('edu.mit.ll.graphulo.MatlabGraphulo',INSTANCENAME,ZKHOSTS,'root','secret');
%Tadj = DB([myName 'TgraphAdj'],[myName 'TgraphAdjT']);    % Create database table pair for holding adjacency matrix.
%TadjDeg = DB([myName 'TgraphAdjDeg']);                    % Create database table for counting degree.
%Tedge = DB([myName 'TgraphEdge'],[myName 'TgraphEdgeT']); % Create database table pair for holding incidense matrix.
%TedgeDeg = DB([myName 'TgraphEdgeDeg']);                  % Create database table for counting degree.
%Tedge1 = DB([myName 'TgraphEdge']);                       % Create binding for setting split.
%Tedge2 = DB([myName 'TgraphEdgeT']);                      % Create binding for setting split.
EOF

# edit path to lara-graphulo in 
#emacs "$D4M_HOME/examples/3Scaling/2ParallelDatabase/pt04_TableMultMR.m"



#cd ~
#git clone https://github.com/dhutchis/lara-graphulo.git
#cd lara-graphulo
#git fetch origin
#git checkout mr
#mvn package -DskipTests -DBundleAll
#
#declare -a arrr=("worker1" "worker2" "worker3" "worker4" "worker5" "worker6" "worker7" "worker8")
##"leader1" "leader2" "leader3" 
#for i in "${arrr[@]}"
#do
#  sftp "$i":"/home/centos/install/accumulo-1.8.0/lib/ext" <<< $'put target/lara-graphulo-1.0-SNAPSHOT-tserver.jar'
#done

#EDIT accumulo-site.xml
#INCREASE SPLIT SIZE



































































